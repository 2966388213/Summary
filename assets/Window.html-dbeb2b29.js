import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{o as i,c as o,a as n}from"./app-f4a76b4f.js";const r="/images/over_partition.png",a={},t=n(`<h1 id="窗口函数" tabindex="-1"><a class="header-anchor" href="#窗口函数" aria-hidden="true">#</a> 窗口函数</h1><p>窗口函数是一类在SQL中用于在查询结果集内执行计算的函数。这些函数通常涉及到对某一列的排序和分组，并在一定范围内进行计算，这个范围被称为窗口（window）。窗口函数通过使用 <code>OVER</code> 子句来定义这个窗口。</p><h2 id="常见的窗口函数" tabindex="-1"><a class="header-anchor" href="#常见的窗口函数" aria-hidden="true">#</a> 常见的窗口函数</h2><p>以下是一些常见的窗口函数，它们通常在SQL中使用：</p><ol><li><p><strong>ROW_NUMBER():</strong> 为结果集中的每一行分配一个唯一的行号。</p></li><li><p><strong>RANK():</strong> 为结果集中的每一行分配一个排名，相同值得到相同的排名，但会跳过相同排名数量。</p></li><li><p><strong>DENSE_RANK():</strong> 为结果集中的每一行分配一个密集排名，相同值得到相同的排名，不会跳过相同排名数量。</p></li><li><p><strong>SUM():</strong> 对窗口内的数值进行求和。</p></li><li><p><strong>AVG():</strong> 对窗口内的数值进行平均计算。</p></li><li><p><strong>MIN():</strong> 获取窗口内的最小值。</p></li><li><p><strong>MAX():</strong> 获取窗口内的最大值。</p></li><li><p><strong>LEAD():</strong> 获取当前行之后的行的值。</p></li><li><p><strong>LAG():</strong> 获取当前行之前的行的值。</p></li><li><p><strong>FIRST_VALUE():</strong> 获取窗口内第一行的值。</p></li><li><p><strong>LAST_VALUE():</strong> 获取窗口内最后一行的值。</p></li></ol><p>这些窗口函数可根据具体的需求在查询中使用，并通过 <code>OVER</code> 子句定义窗口的排序和分组规则。不同的数据库系统可能支持不同的窗口函数，具体取决于数据库的实现。</p><h2 id="row-number-函数" tabindex="-1"><a class="header-anchor" href="#row-number-函数" aria-hidden="true">#</a> ROW_NUMBER() 函数</h2><p>使用PARTITION BY和不使用的区别：</p><ul><li>不使用<code>PARTITION BY</code>：<code>ROW_NUMBER()</code>函数会为结果集中的每一行分配一个唯一的行号。</li><li>使用<code>PARTITION BY</code>：<code>ROW_NUMBER()</code>函数会为结果集中的每一行分配一个唯一的行号，并按照指定的分区字段进行分组。</li></ul><div class="language-SQL line-numbers-mode" data-ext="SQL"><pre class="language-SQL"><code>SELECT Id, OutTradeNo, TradeNo, ROW_NUMBER() OVER(PARTITION BY TradeNo ORDER BY OutTradeNo) as rowId
FROM \`transaction\`
WHERE Id &gt;= 10
LIMIT 1000;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+r+'" alt="截图" tabindex="0" loading="lazy"><figcaption>截图</figcaption></figure>',11),d=[t];function s(l,c){return i(),o("div",null,d)}const _=e(a,[["render",s],["__file","Window.html.vue"]]);export{_ as default};
