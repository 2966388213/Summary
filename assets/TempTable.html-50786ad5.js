import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as a,a as e}from"./app-d03b5bc4.js";const l={},o=e(`<h1 id="临时表" tabindex="-1"><a class="header-anchor" href="#临时表" aria-hidden="true">#</a> 临时表</h1><p>在SQL Server中，临时表是一种临时存储数据的表，其范围仅限于当前会话或查询。它们通常用于存储中间结果，方便在查询中进行复杂的操作或者将数据暂时存储起来。有两种类型的临时表：局部临时表（以<code>#</code>开头）只在创建它们的会话中存在，而全局临时表（以<code>##</code>开头）在创建它们的会话结束前一直存在。</p><p>例如，创建一个局部临时表：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token comment">#TempTable (</span>
    ID <span class="token keyword">INT</span><span class="token punctuation">,</span>
    Name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后可以在当前会话中使用<code>#TempTable</code>表来存储和检索数据。</p><h2 id="创建临时表的几种方式" tabindex="-1"><a class="header-anchor" href="#创建临时表的几种方式" aria-hidden="true">#</a> 创建临时表的几种方式</h2><p>在SQL Server中，有几种方式可以创建临时表：</p><ol><li><p><strong>局部临时表（Local Temporary Table）：</strong> 使用<code>#</code>作为前缀，创建的表只在当前会话中存在，会话结束后表自动删除。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token comment">#TempTable (</span>
    ID <span class="token keyword">INT</span><span class="token punctuation">,</span>
    Name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>全局临时表（Global Temporary Table）：</strong> 使用<code>##</code>作为前缀，创建的表在创建它的会话结束前一直存在，其他会话也可以访问。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token comment">##GlobalTempTable (</span>
    ID <span class="token keyword">INT</span><span class="token punctuation">,</span>
    Name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>表变量（Table Variable）：</strong> 使用<code>DECLARE @variable TABLE</code>语法，表变量在当前批次或脚本执行期间存在，超出作用域后被销毁。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">DECLARE</span> <span class="token variable">@TempTable</span> <span class="token keyword">TABLE</span> <span class="token punctuation">(</span>
    ID <span class="token keyword">INT</span><span class="token punctuation">,</span>
    Name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>这些方式提供了不同的范围和生命周期，可以根据具体需求选择适当的方法。</p><h2 id="使用select-into来创建临时表" tabindex="-1"><a class="header-anchor" href="#使用select-into来创建临时表" aria-hidden="true">#</a> 使用select into来创建临时表</h2><p>使用<code>SELECT INTO</code>语句可以从一个现有的表或查询结果创建一个新的表，也可以用于创建临时表。以下是一个简单的示例：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">INTO</span> <span class="token comment">#TempTable</span>
<span class="token keyword">FROM</span> ExistingTable
<span class="token keyword">WHERE</span> SomeCondition<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个例子中，<code>#TempTable</code> 是一个局部临时表，它会从<code>ExistingTable</code> 中选择满足<code>SomeCondition</code> 的行，并将其复制到新创建的临时表中。在当前会话结束时，这个临时表将被自动删除。</p><p>你可以根据需要修改<code>SELECT</code>语句的条件和字段，以适应你的具体情况。</p>`,14),p=[o];function c(i,t){return s(),a("div",null,p)}const u=n(l,[["render",c],["__file","TempTable.html.vue"]]);export{u as default};
